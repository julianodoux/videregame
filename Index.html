<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">

<!-- BLOQUEIA QUALQUER ZOOM -->
<meta name="viewport" 
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Controle de Sorvetes</title>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    html, body {
        width: 100%;
        height: 100%;
        overflow-x: hidden;
        touch-action: manipulation; /* bloqueia double-tap zoom */
        background: #f2f2f7;
        font-family: Arial, sans-serif;
    }

    body {
        padding: 12px;
    }

    h1 {
        text-align: center;
        margin: 10px 0 20px 0;
        font-size: 26px;
        font-weight: 900;
        color: #222;
    }

    .cat-btn {
        width: 100%;
        background: #007aff;
        color: white;
        padding: 18px;
        font-size: 20px;
        border: none;
        border-radius: 14px;
        margin-top: 15px;
        cursor: pointer;
        font-weight: bold;
        box-shadow: 0 3px 7px rgba(0,0,0,0.15);
        touch-action: manipulation; /* impede zoom ao tocar rápido */
    }

    .categoria {
        display: none;
        margin-top: 8px;
        background: #ffffff;
        padding: 14px;
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        width: 100%;
    }

    .item {
        background: #fff;
        padding: 16px;
        margin: 14px 0;
        border-radius: 14px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        width: 100%;
        transition: 0.2s;
    }

    .item.zero {
        background: #ff4d4d !important;
        color: white !important;
    }

    .nome {
        font-size: 22px;
        font-weight: bold;
    }

    .valor {
        font-size: 17px;
        color: #007aff;
        margin-top: 3px;
        font-weight: bold;
    }

    .restante {
        font-size: 18px;
        margin-top: 4px;
        font-weight: bold;
    }

    .linha {
        display: flex;
        justify-content: space-between;
        margin-top: 16px;
        width: 100%;
    }

    .controls {
        display: flex;
        align-items: center;
        gap: 10px;
        width: 100%;
        justify-content: space-between;
    }

    .controls span {
        font-size: 17px;
        width: 90px;
        font-weight: bold;
    }

    .btn {
        width: 55px;
        height: 55px;
        border-radius: 14px;
        border: none;
        cursor: pointer;
        font-size: 32px;
        font-weight: bold;
        touch-action: manipulation;
    }

    .menos { background: #ff3b30; color: white; }
    .mais  { background: #34c759; color: white; }

    .numero {
        width: 60px;
        text-align: center;
        font-size: 28px;
        font-weight: bold;
    }

    #totalVendas {
        margin-top: 25px;
        padding: 20px;
        background: #e6fff0;
        border-radius: 16px;
        font-size: 26px;
        text-align: center;
        font-weight: 900;
        color: #0b6b1a;
        width: 100%;
    }
</style>

<script>
/* BLOQUEIA PINCH ZOOM */
document.addEventListener("touchmove", function (event) {
    if (event.scale !== 1) event.preventDefault();
}, { passive: false });

/* BLOQUEIA DOUBLE TAP ZOOM */
let lastTouch = 0;
document.addEventListener('touchend', function (e) {
    const now = Date.now();
    if (now - lastTouch <= 300) {
        e.preventDefault();
    }
    lastTouch = now;
}, false);

let precoPorCategoria = {
    "PALETAS FRUTIVERÃO": 18,
    "AO LEITE FRUTIVERÃO": 8,
    "TROPICAL FRUTIVERÃO": 6,
    "ESPECIAL FRUTIBLITO": 13,
    "LANÇAMENTOS": null
};

let precosLancamentos = { "Pistache": 16, "Unicórnio": 10 };

let categorias = {
    "PALETAS FRUTIVERÃO": ["Raffaello","Oreo","Ferrero","Kinder Ovo","Kinder Bueno","M&M","Choco Maltine","Milk Trufado","Babalu","Blue Ice","Sensação","Morango","Maracujá","Açaí","Iogurte c/ Amora","Menta c/ Chocolate","Paçoca","Capuccino","Banana com Avelã","Coco c/ Abobora","Coco c/ Doce de Leite","Tapioca","Abacaxi Zero"],
    "AO LEITE FRUTIVERÃO": ["Morango","Chocolate","Leite Condensado","Milho-Verde","Açaí c/ Morango","Coco","Coco Queimado","Abóbora c/ Coco","Amendoim","Abacate","Blue Ice"],
    "TROPICAL FRUTIVERÃO": ["Uva","Limão","Maracujá","Manga","Abacaxi","Melancia","Tangerina","Maçã Verde","Groselha","Tutti Frutti","Pinta Língua"],
    "ESPECIAL FRUTIBLITO": ["Frutiblito","Sunday de Chocolate","Sunday de Morango"],
    "LANÇAMENTOS": ["Pistache","Unicórnio"]
};

let id = 1;
let total = 0;

function toggle(cat) {
    let el = document.getElementById("cat_" + cat);
    el.style.display = el.style.display === "block" ? "none" : "block";
}

function atualizar(id) {
    let est = Number(document.getElementById("est_" + id).innerText);
    let vend = Number(document.getElementById("vend_" + id).innerText);
    let resto = est - vend;
    if (resto < 0) resto = 0;

    document.getElementById("resto_" + id).innerText = "Restante: " + resto;

    let bloco = document.getElementById("item_" + id);
    if (resto === 0) bloco.classList.add("zero");
    else bloco.classList.remove("zero");
}

function add(tipo, id, preco) {
    let campo = document.getElementById(tipo + "_" + id);
    campo.innerText = Number(campo.innerText) + 1;

    if (tipo === "vend") {
        total += preco;
        document.getElementById("totalVendas").innerText =
            "TOTAL EM VENDAS: R$ " + total.toFixed(2);
    }

    atualizar(id);
}

function remove(tipo, id, preco) {
    let campo = document.getElementById(tipo + "_" + id);
    let valor = Number(campo.innerText);

    if (valor > 0) {
        campo.innerText = valor - 1;

        if (tipo === "vend") {
            total -= preco;
            if (total < 0) total = 0;
            document.getElementById("totalVendas").innerText =
                "TOTAL EM VENDAS: R$ " + total.toFixed(2);
        }

        atualizar(id);
    }
}
</script>

</head>
<body>

<h1>Controle de Sorvetes</h1>

<div id="conteudo">

<script>
for (let cat in categorias) {

    document.write(`<button class="cat-btn" onclick="toggle('${cat}')">${cat}</button>`);
    document.write(`<div id="cat_${cat}" class="categoria">`);

    categorias[cat].forEach(sabor => {
        let preco = precoPorCategoria[cat];
        if (cat === "LANÇAMENTOS") preco = precosLancamentos[sabor];

        document.write(`
            <div class="item" id="item_${id}">
                <div class="nome">${sabor}</div>
                <div class="valor">Preço: R$ ${preco}</div>
                <div class="restante" id="resto_${id}">Restante: 0</div>

                <div class="linha">
                    <div class="controls">
                        <span>Estoque</span>
                        <button class="btn menos" onclick="remove('est', ${id}, ${preco})">-</button>
                        <span class="numero" id="est_${id}">0</span>
                        <button class="btn mais" onclick="add('est', ${id}, ${preco})">+</button>
                    </div>
                </div>

                <div class="linha">
                    <div class="controls">
                        <span>Vendido</span>
                        <button class="btn menos" onclick="remove('vend', ${id}, ${preco})">-</button>
                        <span class="numero" id="vend_${id}">0</span>
                        <button class="btn mais" onclick="add('vend', ${id}, ${preco})">+</button>
                    </div>
                </div>

            </div>
        `);

        id++;
    });

    document.write("</div>");
}
</script>

</div>

<div id="totalVendas">TOTAL EM VENDAS: R$ 0,00</div>

</body>
</html>